library(readxl)
library(readxl)
library(openxlsx)
library(dplyr)
library(deaR)
install.packages("readxl")
library(dplyr)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
source("functions.R")
source("graphics.R")
# ==============================================
#  PROCESAMIENTO DE DATOS
# ==============================================
#  CONSOLIDADO DE DATOS POR AÑO
anios <- 2014:2023
anios_pre_pandemia <- c("2014", "2015", "2016", "2017", "2018", "2019")
anios_pandemia <- c("2020", "2021", "2022", "2023")
load("dataR/datos.RData")
load("dataR/resultados_eficiencia.RData")
load("dataR/malmquist.RData")
load("dataR/determinantes.RData")
# Aplicar el filtro a todos los años
datos_filtrados_vrs_io <- lapply(names(datos), function(anio) {
datos[[anio]] %>%
filter(!(IdEstablecimiento %in% resultados[["io"]][["vector_outliers_vrs"]]))
})
datos_filtrados_crs_io <- lapply(names(datos), function(anio) {
datos[[anio]] %>%
filter(!(IdEstablecimiento %in% resultados[["io"]][["vector_outliers_crs"]]))
})
datos_filtrados_vrs_oo <- lapply(names(datos), function(anio) {
datos[[anio]] %>%
filter(!(IdEstablecimiento %in% resultados[["oo"]][["vector_outliers_vrs"]]))
})
datos_filtrados_crs_oo <- lapply(names(datos), function(anio) {
datos[[anio]] %>%
filter(!(IdEstablecimiento %in% resultados[["oo"]][["vector_outliers_crs"]]))
})
resultados_sin_atipicos_vrs <- list(
io = list(original = datos_filtrados_vrs_io,
iteracion_1_io = iteracion_1_io,
iteracion_1_oo = iteracion_1_oo),
oo = list(original = datos_filtrados_vrs_oo,
iteracion_3_io = iteracion_1_io,
iteracion_3_oo = iteracion_1_oo),
)
# Mantener los nombres originales
names(datos_filtrados_vrs_oo) <- names(datos)
names(datos_filtrados_crs_oo) <- names(datos)
names(datos_filtrados_vrs_io) <- names(datos)
names(datos_filtrados_crs_io) <- names(datos)
anios <- c("2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022","2023")
iteracion_1_io <-  sapply(datos_filtrados_vrs_io, function(data) analisis_dea_general(data, "io"), simplify = FALSE)
iteracion_1_oo <-  sapply(datos_filtrados_vrs_io, function(data) analisis_dea_general(data, "oo"), simplify = FALSE)
iteracion_2_io <-  sapply(datos_filtrados_crs_oo, function(data) analisis_dea_general(data, "io"), simplify = FALSE)
iteracion_2_oo <-  sapply(datos_filtrados_crs_oo, function(data) analisis_dea_general(data, "oo"), simplify = FALSE)
iteracion_3_io <-  sapply(datos_filtrados_vrs_oo, function(data) analisis_dea_general(data, "io"), simplify = FALSE)
iteracion_3_oo <-  sapply(datos_filtrados_vrs_oo, function(data) analisis_dea_general(data, "oo"), simplify = FALSE)
iteracion_4_io <-  sapply(datos_filtrados_crs_io, function(data) analisis_dea_general(data, "io"), simplify = FALSE)
iteracion_4_oo <-  sapply(datos_filtrados_crs_io, function(data) analisis_dea_general(data, "oo"), simplify = FALSE)
resultados_sin_atipicos_vrs <- list(
io = list(original = datos_filtrados_vrs_io,
iteracion_1_io = iteracion_1_io,
iteracion_1_oo = iteracion_1_oo),
oo = list(original = datos_filtrados_vrs_oo,
iteracion_3_io = iteracion_1_io,
iteracion_3_oo = iteracion_1_oo),
)
resultados_sin_atipicos_vrs <- list(
io = list(original = datos_filtrados_vrs_io,
iteracion_1_io = iteracion_1_io,
iteracion_1_oo = iteracion_1_oo),
oo = list(original = datos_filtrados_vrs_oo,
iteracion_3_io = iteracion_3_io,
iteracion_3_oo = iteracion_3_oo),
)
resultados_sin_atipicos_vrs <- list(
io = list(original = datos_filtrados_vrs_io,
iteracion_1_io = iteracion_1_io,
iteracion_1_oo = iteracion_1_oo),
oo = list(original = datos_filtrados_vrs_oo,
iteracion_3_io = iteracion_3_io,
iteracion_3_oo = iteracion_3_oo)
)
View(resultados_sin_atipicos_vrs)
View(resultados)
resultados_sin_atipicos_vrs <- list(
io = list(original = datos_filtrados_vrs_io,
iteracion_io = iteracion_1_io,
iteracion_oo = iteracion_1_oo),
oo = list(original = datos_filtrados_vrs_oo,
iteracion_io = iteracion_3_io,
iteracion_oo = iteracion_3_oo)
)
resultados_sin_atipicos_crs <- list(
io = list(original = datos_filtrados_crs_io,
iteracion_io = iteracion_2_io,
iteracion_oo = iteracion_2_oo),
oo = list(original = datos_filtrados_crs_oo,
iteracion_io = iteracion_4_io,
iteracion_oo = iteracion_4_oo)
)
filtrar_y_analizar <- function(datos, resultados, vector_outliers_vrs, vector_outliers_crs, analisis_dea_general) {
# Aplicar el filtro a todos los años
filtrar_datos <- function(datos, vector_outliers) {
datos_filtrados <- lapply(names(datos), function(anio) {
datos[[anio]] %>%
filter(!(IdEstablecimiento %in% vector_outliers))
})
names(datos_filtrados) <- names(datos)
return(datos_filtrados)
}
# Filtrar datos
datos_filtrados_vrs_io <- filtrar_datos(datos, resultados[["io"]][[vector_outliers_vrs]])
datos_filtrados_crs_io <- filtrar_datos(datos, resultados[["io"]][[vector_outliers_crs]])
datos_filtrados_vrs_oo <- filtrar_datos(datos, resultados[["oo"]][[vector_outliers_vrs]])
datos_filtrados_crs_oo <- filtrar_datos(datos, resultados[["oo"]][[vector_outliers_crs]])
# Realizar iteraciones de análisis DEA
realizar_iteracion <- function(datos_filtrados, orientacion) {
sapply(datos_filtrados, function(data) analisis_dea_general(data, orientacion), simplify = FALSE)
}
iteracion_1_io <- realizar_iteracion(datos_filtrados_vrs_io, "io")
iteracion_1_oo <- realizar_iteracion(datos_filtrados_vrs_io, "oo")
iteracion_2_io <- realizar_iteracion(datos_filtrados_crs_oo, "io")
iteracion_2_oo <- realizar_iteracion(datos_filtrados_crs_oo, "oo")
iteracion_3_io <- realizar_iteracion(datos_filtrados_vrs_oo, "io")
iteracion_3_oo <- realizar_iteracion(datos_filtrados_vrs_oo, "oo")
iteracion_4_io <- realizar_iteracion(datos_filtrados_crs_io, "io")
iteracion_4_oo <- realizar_iteracion(datos_filtrados_crs_io, "oo")
# Crear listas de resultados
resultados_sin_atipicos_vrs <- list(
io = list(original = datos_filtrados_vrs_io,
iteracion_io = iteracion_1_io,
iteracion_oo = iteracion_1_oo),
oo = list(original = datos_filtrados_vrs_oo,
iteracion_io = iteracion_3_io,
iteracion_oo = iteracion_3_oo)
)
resultados_sin_atipicos_crs <- list(
io = list(original = datos_filtrados_crs_io,
iteracion_io = iteracion_2_io,
iteracion_oo = iteracion_2_oo),
oo = list(original = datos_filtrados_crs_oo,
iteracion_io = iteracion_4_io,
iteracion_oo = iteracion_4_oo)
)
# Retornar resultados
return(list(vrs = resultados_sin_atipicos_vrs, crs = resultados_sin_atipicos_crs))
}
filtrar_y_analizar <- function(datos, resultados) {
# Aplicar el filtro a todos los años
filtrar_datos <- function(datos, vector_outliers) {
datos_filtrados <- lapply(names(datos), function(anio) {
datos[[anio]] %>%
filter(!(IdEstablecimiento %in% vector_outliers))
})
names(datos_filtrados) <- names(datos)
return(datos_filtrados)
}
# Filtrar datos
datos_filtrados_vrs_io <- filtrar_datos(datos, resultados[["io"]][["vector_outliers_vrs"]])
datos_filtrados_crs_io <- filtrar_datos(datos, resultados[["io"]][["vector_outliers_crs"]])
datos_filtrados_vrs_oo <- filtrar_datos(datos, resultados[["oo"]][["vector_outliers_vrs"]])
datos_filtrados_crs_oo <- filtrar_datos(datos, resultados[["oo"]][["vector_outliers_crs"]])
# Realizar iteraciones de análisis DEA
realizar_iteracion <- function(datos_filtrados, orientacion) {
sapply(datos_filtrados, function(data) analisis_dea_general(data, orientacion), simplify = FALSE)
}
iteracion_1_io <- realizar_iteracion(datos_filtrados_vrs_io, "io")
iteracion_1_oo <- realizar_iteracion(datos_filtrados_vrs_io, "oo")
iteracion_2_io <- realizar_iteracion(datos_filtrados_crs_oo, "io")
iteracion_2_oo <- realizar_iteracion(datos_filtrados_crs_oo, "oo")
iteracion_3_io <- realizar_iteracion(datos_filtrados_vrs_oo, "io")
iteracion_3_oo <- realizar_iteracion(datos_filtrados_vrs_oo, "oo")
iteracion_4_io <- realizar_iteracion(datos_filtrados_crs_io, "io")
iteracion_4_oo <- realizar_iteracion(datos_filtrados_crs_io, "oo")
# Crear listas de resultados
resultados_sin_atipicos_vrs <- list(
io = list(original = datos_filtrados_vrs_io,
iteracion_io = iteracion_1_io,
iteracion_oo = iteracion_1_oo),
oo = list(original = datos_filtrados_vrs_oo,
iteracion_io = iteracion_3_io,
iteracion_oo = iteracion_3_oo)
)
resultados_sin_atipicos_crs <- list(
io = list(original = datos_filtrados_crs_io,
iteracion_io = iteracion_2_io,
iteracion_oo = iteracion_2_oo),
oo = list(original = datos_filtrados_crs_oo,
iteracion_io = iteracion_4_io,
iteracion_oo = iteracion_4_oo)
)
# Retornar resultados
return(list(vrs = resultados_sin_atipicos_vrs, crs = resultados_sin_atipicos_crs))
}
resultados_sin_atipicos <- filtrar_y_analizar(datos, resultados)
View(resultados_sin_atipicos)
View(analisis_dea_general)
View(resultados_sin_atipicos)
grafica_eficiencias_2 <- function(resultados, titulo) {
# Parámetros para iterar
tipos <- c("io", "oo")
periodos <- list(
"todos" = "2014 - 2023",
"pre" = "2014 - 2019",
"post" = "2020 - 2023"
)
# Generar gráficos para cada tipo y período
for (tipo in tipos) {
for (periodo in names(periodos)) {
# Crear dataframe
df <- crear_dataframe_2(resultados, tipo, periodo)
# Graficar VRS
print(graficar_boxplots(
df,
"vrs",
paste(titulo,"Distribución de Eficiencia Técnica Orientación", ifelse(tipo == "io", "Entradas", "Salidas"), "(VRS)"),
paste("Período", periodos[[periodo]])
))
# Graficar CRS
print(graficar_boxplots(
df,
"crs",
paste(titulo,"Distribución de Eficiencia Técnica Orientación", ifelse(tipo == "io", "Entradas", "Salidas"), "(CRS)"),
paste("Período", periodos[[periodo]])
))
}
}
}
grafica_atipicos <- function(resultados){
grafica_eficiencias_2(resultados[["vrs"]][["io"]][["iteracion_io"]],"Eliminacion atipicos VRS - IO - ")
grafica_eficiencias_2(resultados[["vrs"]][["io"]][["iteracion_oo"]],"Eliminacion atipicos VRS - IO - ")  # MUCHOS ATIPICOS
grafica_eficiencias_2(resultados[["vrs"]][["oo"]][["iteracion_io"]],"Eliminacion atipicos VRS - OO - ")
grafica_eficiencias_2(resultados[["vrs"]][["oo"]][["iteracion_oo"]], "Eliminacion atipicos VRS - OO - ")
grafica_eficiencias_2(resultados[["crs"]][["io"]][["iteracion_io"]],"Eliminacion atipicos CRS - IO - ")
grafica_eficiencias_2(resultados[["crs"]][["io"]][["iteracion_oo"]],"Eliminacion atipicos CRS - IO - ")
grafica_eficiencias_2(resultados[["crs"]][["oo"]][["iteracion_io"]], "Eliminacion atipicos CRS - OO - ")
grafica_eficiencias_2(resultados[["crs"]][["oo"]][["iteracion_oo"]], "Eliminacion atipicos VRS - OO - ")
}
grafica_atipicos <- function(resultados_sin_atipicos)
grafica_atipicos <- function(resultados){
print(grafica_eficiencias_2(resultados[["vrs"]][["io"]][["iteracion_io"]],"Eliminacion atipicos VRS - IO - "))
grafica_eficiencias_2(resultados[["vrs"]][["io"]][["iteracion_oo"]],"Eliminacion atipicos VRS - IO - ")  # MUCHOS ATIPICOS
grafica_eficiencias_2(resultados[["vrs"]][["oo"]][["iteracion_io"]],"Eliminacion atipicos VRS - OO - ")
grafica_eficiencias_2(resultados[["vrs"]][["oo"]][["iteracion_oo"]], "Eliminacion atipicos VRS - OO - ")
grafica_eficiencias_2(resultados[["crs"]][["io"]][["iteracion_io"]],"Eliminacion atipicos CRS - IO - ")
grafica_eficiencias_2(resultados[["crs"]][["io"]][["iteracion_oo"]],"Eliminacion atipicos CRS - IO - ")
grafica_eficiencias_2(resultados[["crs"]][["oo"]][["iteracion_io"]], "Eliminacion atipicos CRS - OO - ")
grafica_eficiencias_2(resultados[["crs"]][["oo"]][["iteracion_oo"]], "Eliminacion atipicos VRS - OO - ")
}
grafica_atipicos <- function(resultados_sin_atipicos)
grafica_atipicos(resultados_sin_atipicos)
grafica_atipicos <- function(resultados){
print(grafica_eficiencias_2(resultados[["vrs"]][["io"]][["iteracion_io"]],"Eliminacion atipicos VRS - IO - "))
grafica_eficiencias_2(resultados[["vrs"]][["io"]][["iteracion_oo"]],"Eliminacion atipicos VRS - IO - ")  # MUCHOS ATIPICOS
grafica_eficiencias_2(resultados[["vrs"]][["oo"]][["iteracion_io"]],"Eliminacion atipicos VRS - OO - ")
grafica_eficiencias_2(resultados[["vrs"]][["oo"]][["iteracion_oo"]], "Eliminacion atipicos VRS - OO - ")
grafica_eficiencias_2(resultados[["crs"]][["io"]][["iteracion_io"]],"Eliminacion atipicos CRS - IO - ")
grafica_eficiencias_2(resultados[["crs"]][["io"]][["iteracion_oo"]],"Eliminacion atipicos CRS - IO - ")
grafica_eficiencias_2(resultados[["crs"]][["oo"]][["iteracion_io"]], "Eliminacion atipicos CRS - OO - ")
grafica_eficiencias_2(resultados[["crs"]][["oo"]][["iteracion_oo"]], "Eliminacion atipicos VRS - OO - ")
}
grafica_atipicos(resultados_sin_atipicos)
grafica_atipicos <- function(resultados){
grafica_eficiencias_2(resultados[["vrs"]][["io"]][["iteracion_io"]],"Eliminacion atipicos VRS - IO - ")
grafica_eficiencias_2(resultados[["vrs"]][["io"]][["iteracion_oo"]],"Eliminacion atipicos VRS - IO - ")  # MUCHOS ATIPICOS
grafica_eficiencias_2(resultados[["vrs"]][["oo"]][["iteracion_io"]],"Eliminacion atipicos VRS - OO - ")
grafica_eficiencias_2(resultados[["vrs"]][["oo"]][["iteracion_oo"]], "Eliminacion atipicos VRS - OO - ")
grafica_eficiencias_2(resultados[["crs"]][["io"]][["iteracion_io"]],"Eliminacion atipicos CRS - IO - ")
grafica_eficiencias_2(resultados[["crs"]][["io"]][["iteracion_oo"]],"Eliminacion atipicos CRS - IO - ")
grafica_eficiencias_2(resultados[["crs"]][["oo"]][["iteracion_io"]], "Eliminacion atipicos CRS - OO - ")
grafica_eficiencias_2(resultados[["crs"]][["oo"]][["iteracion_oo"]], "Eliminacion atipicos CRS - OO - ")
}
grafica_atipicos(resultados_sin_atipicos)
grafica_eficiencias(resultados)
grafica_atipicos(resultados_sin_atipicos)
resultados_combinados <- combinar_resultados_iteraciones(resultados[["io"]][["original"]], iteracion_1_oo, iteracion_1_io, iteracion_4_oo, iteracion_4_io)
View(resultados_combinados)
# CORRELACION DE VALORES ORIGINALES PARA TODAS LAS COMBINACIONES EN TODOS LOS AÑOS
resultados_combinaciones <- combinar_resultados_in_out(resultados$io[["original"]], resultados$oo[["original"]])
correlacion_todos_metodos <- calcular_correlaciones_all(resultados_combinaciones)
graficar_correlaciones(correlacion_todos_metodos[["correlaciones_lista"]], "ambos", c("vrs_io", "vrs_oo", "crs_io", "crs_oo"))
# GRAFICA DE SENSIBILIDAD POR EFICIENCIA
graficar_correlaciones(resultados[["io"]][["resultados_correlacion"]][["correlaciones_lista"]], "io", c("vrs_i1", "vrs_i2", "vrs_i3", "crs_i1", "crs_i2",  "crs_i3"), "Sensibilidad por eliminación de DMU eficientes")
graficar_correlaciones(correlacion_todos_metodos[["correlaciones_lista"]], "ambos", c("vrs_io", "vrs_oo", "crs_io", "crs_oo"))
datos_filtrados_atipicos <- function(datos, resultados) {
# Filtrar datos
datos_filtrados_vrs_io <- filtrar_datos(datos, resultados[["io"]][["vector_outliers_vrs"]])
datos_filtrados_crs_io <- filtrar_datos(datos, resultados[["io"]][["vector_outliers_crs"]])
datos_filtrados_vrs_oo <- filtrar_datos(datos, resultados[["oo"]][["vector_outliers_vrs"]])
datos_filtrados_crs_oo <- filtrar_datos(datos, resultados[["oo"]][["vector_outliers_crs"]])
return (list(
vrs_io = datos_filtrados_vrs_io,
crs_io = datos_filtrados_crs_io,
vrs_oo = datos_filtrados_vrs_oo,
crs_oo = datos_filtrados_crs_oo
))
}
filtrar_datos <- function(datos, vector_outliers) {
datos_filtrados <- lapply(names(datos), function(anio) {
datos[[anio]] %>%
filter(!(IdEstablecimiento %in% vector_outliers))
})
names(datos_filtrados) <- names(datos)
return(datos_filtrados)
}
datos_sin_atipicos <- datos_filtrados_atipicos(datos,resultados)
View(datos_sin_atipicos)
View(datos)
View(datos_sin_atipicos)
resultados_sin_atipicos_vrs_io <- list(io = resultados_iteracion(datos_sin_atipicos[["vrs_io"]], "io"),oo = resultados_iteracion(datos_sin_atipicos[["vrs_io"]], "oo"))
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
source("functions.R")
source("graphics.R")
# ==============================================
#  PROCESAMIENTO DE DATOS
# ==============================================
#  CONSOLIDADO DE DATOS POR AÑO
anios <- 2014:2023
anios_pre_pandemia <- c("2014", "2015", "2016", "2017", "2018", "2019")
anios_pandemia <- c("2020", "2021", "2022", "2023")
load("dataR/datos.RData")
load("dataR/resultados_eficiencia.RData")
load("dataR/malmquist.RData")
load("dataR/determinantes.RData")
datos_sin_atipicos <- datos_filtrados_atipicos(datos,resultados)
filtrar_datos <- function(datos, vector_outliers) {
datos_filtrados <- lapply(names(datos), function(anio) {
datos[[anio]] %>%
filter(!(IdEstablecimiento %in% vector_outliers))
})
names(datos_filtrados) <- names(datos)
return(datos_filtrados)
}
datos_filtrados_atipicos <- function(datos, resultados) {
# Filtrar datos
datos_filtrados_vrs_io <- filtrar_datos(datos, resultados[["io"]][["vector_outliers_vrs"]])
datos_filtrados_crs_io <- filtrar_datos(datos, resultados[["io"]][["vector_outliers_crs"]])
datos_filtrados_vrs_oo <- filtrar_datos(datos, resultados[["oo"]][["vector_outliers_vrs"]])
datos_filtrados_crs_oo <- filtrar_datos(datos, resultados[["oo"]][["vector_outliers_crs"]])
return (list(
vrs_io = datos_filtrados_vrs_io,
crs_io = datos_filtrados_crs_io,
vrs_oo = datos_filtrados_vrs_oo,
crs_oo = datos_filtrados_crs_oo
))
}
datos_sin_atipicos <- datos_filtrados_atipicos(datos,resultados)
resultados_sin_atipicos_vrs_io <- list(io = resultados_iteracion(datos_sin_atipicos[["vrs_io"]], "io"),oo = resultados_iteracion(datos_sin_atipicos[["vrs_io"]], "oo"))
resultados_sin_atipicos_crs_io <- list(io = resultados_iteracion(datos_sin_atipicos[["crs_io"]], "io"),oo = resultados_iteracion(datos_sin_atipicos[["crs_io"]], "oo"))
resultados_sin_atipicos_vrs_oo <- list(io = resultados_iteracion(datos_sin_atipicos[["vrs_oo"]], "io"),oo = resultados_iteracion(datos_sin_atipicos[["vrs_oo"]], "oo"))
resultados_sin_atipicos_crs_oo <- list(io = resultados_iteracion(datos_sin_atipicos[["crs_oo"]], "io"),oo = resultados_iteracion(datos_sin_atipicos[["crs_oo"]], "oo"))
graficar_correlaciones(resultados_sin_atipicos_vrs_io[["io"]][["resultados_correlacion"]][["correlaciones_lista"]], "io", c("vrs_i1", "vrs_i2", "vrs_i3", "crs_i1", "crs_i2",  "crs_i3"), "Sensibilidad por eliminación de DMU eficientes")
graficar_correlaciones(resultados_sin_atipicos_vrs_io[["oo"]][["resultados_correlacion"]][["correlaciones_lista"]], "oo", c("vrs_i1", "vrs_i2", "vrs_i3", "crs_i1", "crs_i2",  "crs_i3"), "Sensibilidad por eliminación de DMU eficientes")
graficar_correlaciones(resultados_sin_atipicos_vrs_oo[["oo"]][["resultados_correlacion"]][["correlaciones_lista"]], "oo", c("vrs_i1", "vrs_i2", "vrs_i3", "crs_i1", "crs_i2",  "crs_i3"), "Sensibilidad por eliminación de DMU eficientes - Sin datos atipicos VRS Output")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
source("functions.R")
source("graphics.R")
# ==============================================
#  PROCESAMIENTO DE DATOS
# ==============================================
#  CONSOLIDADO DE DATOS POR AÑO
anios <- 2014:2023
anios_pre_pandemia <- c("2014", "2015", "2016", "2017", "2018", "2019")
anios_pandemia <- c("2020", "2021", "2022", "2023")
load("dataR/datos.RData")
load("dataR/resultados_eficiencia.RData")
load("dataR/malmquist.RData")
load("dataR/determinantes.RData")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
source("functions.R")
source("graphics.R")
# ==============================================
#  PROCESAMIENTO DE DATOS
# ==============================================
#  CONSOLIDADO DE DATOS POR AÑO
anios <- 2014:2023
anios_pre_pandemia <- c("2014", "2015", "2016", "2017", "2018", "2019")
anios_pandemia <- c("2020", "2021", "2022", "2023")
load("dataR/datos.RData")
load("dataR/resultados_eficiencia.RData")
load("dataR/malmquist.RData")
load("dataR/determinantes.RData")
#  ELIMINACIÓN DE DATOS ATÍPICOS
datos_sin_atipicos <- datos_filtrados_atipicos(datos,resultados)
resultados_sin_atipicos_vrs_io <- list(io = resultados_iteracion(datos_sin_atipicos[["vrs_io"]], "io"),oo = resultados_iteracion(datos_sin_atipicos[["vrs_io"]], "oo"))
resultados_sin_atipicos_crs_io <- list(io = resultados_iteracion(datos_sin_atipicos[["crs_io"]], "io"),oo = resultados_iteracion(datos_sin_atipicos[["crs_io"]], "oo"))
resultados_sin_atipicos_vrs_oo <- list(io = resultados_iteracion(datos_sin_atipicos[["vrs_oo"]], "io"),oo = resultados_iteracion(datos_sin_atipicos[["vrs_oo"]], "oo"))
resultados_sin_atipicos_crs_oo <- list(io = resultados_iteracion(datos_sin_atipicos[["crs_oo"]], "io"),oo = resultados_iteracion(datos_sin_atipicos[["crs_oo"]], "oo"))
View(resultados_sin_atipicos)
save(resultados_sin_atipicos_crs_io,resultados_sin_atipicos_crs_oo,resultados_sin_atipicos_vrs_io,resultados_sin_atipicos_vrs_oo, file = "resultados_atipicos.RData")
load("dataR/resultados_eficiencia.RData")
save(correlacion_todos_metodos,resultados,resultados_combinaciones,file = "resultados_atipicos.RData")
load("dataR/resultados_eficiencia.RData")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
source("functions.R")
source("graphics.R")
# ==============================================
#  PROCESAMIENTO DE DATOS
# ==============================================
#  CONSOLIDADO DE DATOS POR AÑO
anios <- 2014:2023
anios_pre_pandemia <- c("2014", "2015", "2016", "2017", "2018", "2019")
anios_pandemia <- c("2020", "2021", "2022", "2023")
load("dataR/datos.RData")
load("dataR/resultados_eficiencia.RData")
load("dataR/resultados_eficiencia_atipicos.RData")
load("dataR/malmquist.RData")
load("dataR/determinantes.RData")
graficar_correlaciones(resultados_sin_atipicos_vrs_oo[["oo"]][["resultados_correlacion"]][["correlaciones_lista"]], "oo", c("vrs_i1", "vrs_i2", "vrs_i3", "crs_i1", "crs_i2",  "crs_i3"), "Sensibilidad por eliminación de DMU eficientes - Sin datos atipicos VRS Output")
graficar_correlaciones(resultados_sin_atipicos_vrs_oo[["oo"]][["resultados_correlacion"]][["correlaciones_lista"]], "oo", c("vrs_i1", "vrs_i2", "vrs_i3", "crs_i1", "crs_i2",  "crs_i3"), "Sensibilidad por eliminación de DMU eficientes - Sin datos atipicos VRS Output")
